# RelayPACS Backend Environment Variables

# ==============================================================================
# SECURITY (REQUIRED)
# ==============================================================================

# JWT Secret Key (REQUIRED - must be set in production)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=dev-secret-key-change-in-production

# JWT Algorithm
ALGORITHM=HS256

# Token expiration times (in minutes)
ACCESS_TOKEN_EXPIRE_MINUTES=60
UPLOAD_TOKEN_EXPIRE_MINUTES=30

# ==============================================================================
# APPLICATION
# ==============================================================================

# Application name
APP_NAME=RelayPACS

# Debug mode (set to false in production)
DEBUG=true

# API configuration
API_HOST=0.0.0.0
API_PORT=8003

# ==============================================================================
# DATABASE
# ==============================================================================

# Database connection string
# Development (SQLite): sqlite:///./relaypacs.db
# Production (PostgreSQL): postgresql+psycopg2://user:password@host:port/database
DATABASE_URL=postgresql+psycopg2://relaypacs:relaypacs@postgres:5432/relaypacs

# ==============================================================================
# CORS
# ==============================================================================

# Allowed origins for CORS (comma-separated or JSON array)
CORS_ORIGINS=["http://localhost:3002","http://10.10.20.50:3002"]

# ==============================================================================
# S3 STORAGE (MinIO)
# ==============================================================================

# Enable S3 storage
USE_S3=true

# S3 endpoint (MinIO or AWS S3)
S3_ENDPOINT=http://minio:9000

# S3 credentials
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin

# S3 bucket configuration
S3_BUCKET=relay-pacs-uploads
S3_REGION=us-east-1

# ==============================================================================
# PACS INTEGRATION
# ==============================================================================

# DICOM Application Entity Title for this node
AE_TITLE=RELAYPACS

# --- Orthanc PACS ---
ORTHANC_URL=http://orthanc:8042
ORTHANC_WADO_URL=http://orthanc:8042/dicom-web
ORTHANC_USERNAME=orthanc
ORTHANC_PASSWORD=orthanc

# --- dcm4che PACS ---
DCM4CHEE_URL=http://dcm4chee:8080/dcm4chee-arc/aets/DCM4CHEE/rs
DCM4CHEE_WADO_URL=http://dcm4chee:8080/dcm4chee-arc/aets/DCM4CHEE/rs

# Active PACS selection: 'orthanc', 'dcm4chee', or 'both'
ACTIVE_PACS=dcm4chee

# PACS polling interval for report updates (seconds)
PACS_POLL_INTERVAL_SECONDS=10

# ==============================================================================
# UPLOAD CONFIGURATION
# ==============================================================================

# Maximum file size in MB
MAX_FILE_SIZE_MB=2048

# Chunk size for resumable uploads in MB
CHUNK_SIZE_MB=1

# ==============================================================================
# CACHING (Redis)
# ==============================================================================

# Redis connection URL
# Format: redis://host:port or redis://host:port/db_number
REDIS_URL=redis://redis:6379

# ==============================================================================
# REPORTS & NOTIFICATIONS
# ==============================================================================

# Reports database path (SQLite for reports metadata)
REPORTS_DB_PATH=data/reports.db

# ==============================================================================
# ERROR MONITORING (Sentry)
# ==============================================================================

# Sentry DSN (leave empty to disable)
# Get from: https://sentry.io/settings/projects/
SENTRY_DSN=

# Sentry environment name
SENTRY_ENVIRONMENT=development

# Sentry traces sample rate (0.0 to 1.0)
SENTRY_TRACES_SAMPLE_RATE=0.1

# ==============================================================================
# DEVELOPMENT / TESTING
# ==============================================================================

# Set to true to enable additional logging
VERBOSE_LOGGING=false

# ==============================================================================
# NOTES
# ==============================================================================
#
# 1. Copy this file to '.env' and update values for your environment
# 2. NEVER commit .env files to version control
# 3. Generate a secure SECRET_KEY for production:
#    python -c "import secrets; print(secrets.token_urlsafe(32))"
# 4. Use strong passwords for database and S3 credentials in production
# 5. Configure Sentry DSN in production for error monitoring
#
